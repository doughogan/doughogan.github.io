<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Multimedia</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center"><font color="#336666"> Multimedia (with Inner Classes) </font></h1><p align="right"><font size="-1">Last Modified   <!-- #BeginDate format:Am2 -->3/24/11<!-- #EndDate --></font></p><p align="center">	<font size="1">		<a href="#images">Images</a> &bull; 		<a href="#audio">Audio</a> &bull; 		<a href="#inner">Inner Classes</a> &bull;		<a href="#more">More</a></font></p><hr><h2><font color="#336666"><a name="images"></a>Images</font></h2><p>There is an <font face="Courier New, Courier, mono">Image</font> class we can use to add images to applets. We set up an image as follows:</p><blockquote>  <pre><strong><font color="#FF0000">Image</font></strong> imageName;imageName = <font color="#FF0000"><strong>getImage(getDocumentBase(),</strong></font> filename<strong><font color="#FF0000">);</font></strong></pre></blockquote><p>We can then use images in Graphics contexts. Here's how we could draw an image: </p><blockquote>  <pre><strong><font color="#FF0000">g.drawImage(</font></strong>imageName<font color="#FF0000"><strong>,</strong></font> x-coordinate of top left<font color="#FF0000"><strong>,</strong></font> y-coordinate of top left<font color="#FF0000">,</font> width<font color="#FF0000"><strong>,</strong></font> height<strong><font color="#FF0000">, this);</font></strong></pre></blockquote><p>You may find the <font face="Courier New, Courier, mono">Image</font> class accessors for the width and the height helpful. Both must be called from a method with a Graphics context (e.g. <font face="Courier New, Courier, mono">paint()</font>) and require that you pass in a reference to the container, so you'll use them with an argument of &quot;<font face="Courier New, Courier, mono">this</font>&quot;:</p><ul>  <li><font face="Courier New, Courier, mono">imageName.getHeight(this); </font></li>  <li><font face="Courier New, Courier, mono">imageName.getWidth(this); </font></li></ul><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#images">Images</a> &bull; <a href="#audio">Audio</a> &bull; <a href="#inner">Inner Classes</a> &bull; <a href="#more">More</a> </font></p><hr><h2><font color="#336666"><a name="audio"></a>Audio</font></h2><p>Java allows us to play audio files. Here we'll look at tchnniques that allow us to work with file formats such as .wav, .au, .midi, and .aif.</p><h3><font color="#336666">Through Applet Method </font></h3><p>The simplest way to play audio is through a <font face="Courier New, Courier, mono">play</font> method in the <font face="Courier New, Courier, mono">JApplet</font> class. Here's the general form: </p><blockquote>  <pre><font color="#FF0000"><strong>play(getDocumentBase(),</strong></font> filename<strong><font color="#FF0000">);</font></strong></pre></blockquote><p>For example, the following code plays a sound called bounce.wav: </p><blockquote>  <pre>play(getDocumentBase(), &quot;bounce.wav&quot;);</pre></blockquote><p>Try <a href="sound_demo.htm" target="_blank">this applet</a>, which simply plays that sound upon loading. </p><p>&nbsp;</p><h3><font color="#336666">Through <font face="Courier New, Courier, mono">AudioClip</font> Class</font></h3><p>The <font face="Courier New, Courier, mono">AudioClip</font> class provides more functionality, but the code is similar to what we see above. </p><p>We set up an audio clip as follows:</p><blockquote>  <pre><strong><font color="#FF0000">AudioClip</font></strong> soundName;soundName = <font color="#FF0000"><strong>getAudioClip(getDocumentBase(),</strong></font> filename<strong><font color="#FF0000">);</font></strong></pre></blockquote><p>Then we can use <font face="Courier New, Courier, mono">AudioClip</font> member methods <font face="Courier New, Courier, mono">play()</font>, <font face="Courier New, Courier, mono">stop()</font>, and <font face="Courier New, Courier, mono">loop()</font>.</p><p>Consider the following example applet (based off of an example in Deitel 24.5), which also demonstrates the idea of using an <strong>inner class</strong> for event handling:  </p><blockquote>  <pre>import javax.swing.*;import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;import java.applet.AudioClip;public class AudioDemo extends JApplet{    <strong><font color="#FF0000">private AudioClip sound; </font></strong>           // demo sound, wav    private JButton playButton;         // button to play sound    private JButton stopButton;         // button to stop sound    private JButton loopButton;         // button to loop sound       @Override    public void init()                                             // set up sound and buttons                         {        ButtonHandler handler = new ButtonHandler();               // inner class obj                                                                   // for buttons        setLayout(new FlowLayout());         <strong><font color="#FF0000">sound = getAudioClip(getDocumentBase(), "bounce.wav");</font></strong>     // load sound         playButton = new JButton("Play Once");                     // set up play button        playButton.addActionListener(handler);        add(playButton);         loopButton = new JButton("Loop");                          // set up loop button        loopButton.addActionListener(handler);        add(loopButton);         stopButton = new JButton("Stop");                          // set up stop button        stopButton.addActionListener(handler);        add(stopButton);     }    // inner class to handle buttons in this applet    private class ButtonHandler implements ActionListener    {        public void actionPerformed(ActionEvent e)               // handle button clicks        {            if(e.getSource() == playButton)                      // play            {                <strong><font color="#FF0000">sound.play();</font></strong>               }             if(e.getSource() == loopButton)                      // loop            {                <strong><font color="#FF0000">sound.loop(); </font></strong>              }             if(e.getSource() == stopButton)                      // stop            {                <strong><font color="#FF0000">sound.stop();</font></strong>               }         }    }}</pre></blockquote><p>Here is that applet: </p><blockquote>  <p><applet code="AudioDemo.class" width="400" height="50"></applet></p></blockquote><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#images">Images</a> &bull; <a href="#audio">Audio</a> &bull; <a href="#inner">Inner Classes</a> &bull; <a href="#more">More</a> </font></p><hr><h2><font color="#336666"><a name="inner"></a>Inner Classes </font></h2><p>Let's again visit the way event handling was done in the above example. The class ButtonHandler was an <strong>inner class</strong> or <strong>nested class</strong>. Inner classes are most frequently used, as in the example above, for event handling, as an alternative to having an applet or application implement one or more interfaces. In this style:</p><ul>  <li>Every method that would need to be implemented to implement the interface is implemented in the inner class </li>  <li>The inner class can access everything the class in which it is nested defines</li></ul><p>Another kind of inner class is called an <strong>anonymous inner class</strong>, used for the same purpose. In this case, the class is not given a name, but instead implemented right inside the parentheses of a call. Consider this example, a simplification of the above: </p><blockquote>  <pre>public class AudioDemo1 extends JApplet{    private AudioClip sound;            // demo sound, wav    private JButton playButton;         // button to play sound       @Override    public void init()                 // set up sound and button to play it                        {        setLayout(new FlowLayout());         sound = getAudioClip(getDocumentBase(), "bounce.wav");     // load sound        playButton = new JButton("Play Once");                     // set up play button        <strong><font color="#FF0000">playButton.addActionListener(                                new ActionListener()                                    // handle via anonymous inner class           {              public void actionPerformed(ActionEvent e)           // handle button clicks              {                sound.play();                 }           }        );</font></strong>        add(playButton);     }}</pre></blockquote><p>&nbsp;</p><h3><font color="#336666"><a name="inner_class_compile"></a>On Compiling </font></h3><p>When we compile programs with inner classes, we get separate bytecode files for the outer class and the inner class. Filenames for inner class bytecode files operate like this:</p><ul>  <li>When we name an inner class, its bytecode filename will be of the form <font face="Courier New, Courier, mono"><em>OuterClass</em><font color="#FF0000">$</font><em>InnerClass</em><font color="#FF0000">.class</font></font></li>  <li>The bytecode file of the first anonymous inner class in an outer class will be of the form <font face="Courier New, Courier, mono"><em>OuterClass</em><font color="#FF0000">$</font>1<font color="#FF0000">.class</font><font face="Times New Roman, Times, serif">.</font> </font>The number will be incremented as we have multiple inner classes, so for the second anonymous inner class, we'll have <font face="Courier New, Courier, mono"><em>OuterClass</em><font color="#FF0000">$</font>2<font color="#FF0000">.class</font><font face="Times New Roman, Times, serif">, etc.</font> </font></li></ul><p>In order to have an applet with inner classes function on a web server, we'll need to upload all of the bytecode files, including those for the inner classes. </p><p>&nbsp; </p><p>&nbsp;</p><p align="center"><font size="1"><a href="#images">Images</a> &bull; <a href="#audio">Audio</a> &bull; <a href="#inner">Inner Classes</a> &bull; <a href="#more">More</a> </font></p><hr><h2><font color="#336666"><a name="more"></a>Java Media Framework and Other Resources </font></h2><p>More multimedia capabilities are provided via the Java Media Framework. Note that this requires downloading adds-ons to the Java Development Kit. See Deitel 24.6 if you're interested in learning more. </p><p>Additionally, see Deitel 24.8 for more web resources on multimedia, including sources of free sounds and images. </p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#images">Images</a> &bull; <a href="#audio">Audio</a> &bull; <a href="#inner">Inner Classes</a> &bull; <a href="#more">More</a> </font></p></body></html>