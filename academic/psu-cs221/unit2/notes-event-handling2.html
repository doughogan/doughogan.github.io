<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Event Handling</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center"><font color="#FF6600"> Event Handling, Part II: Hardware Events </font></h1><p align="right"><font size="-1">Last Modified   <!-- #BeginDate format:Am2 -->3/15/12<!-- #EndDate --></font></p><p align="center">	<font size="1">		<a href="#mouse">Mouse Events</a> &bull;  	<a href="#key">Keyboard Events</a></font></p><hr><h2><font color="#FF6600"><a name="mouse"></a>Handling Mouse Events </font></h2><p>Java also allows us to listen for mouse events. Essentially, we'd use these events to know where the mouse is, either with respect to a GUI component or in terms of <em>x</em> and <em>y</em> coordinates. </p><p>Here's how we'll set up this mouse event handling: </p><ol>  <li>Add <strong><font color="#000066" face="Courier New, Courier, mono">implements MouseListener</font></strong>. </li>  <li>Mouse listening is based upon a particular component. For an applet, that's the whole applet. Thus, we only need the call <strong><font color="#990066" face="Courier New, Courier, mono">addMouseListener(this);</font></strong>. </li>  <li>Finally, we need to write code to handle the event. Class <font face="Courier New, Courier, mono">MouseEvent</font> has accessors <font face="Courier New, Courier, mono">getX()</font> and <font face="Courier New, Courier, mono">getY()</font> that get us the coordinates of where the event occurred. We can store these an use them in other methods. (For example, we could store them and use them in <font face="Courier New, Courier, mono">paint()</font> to draw something.) This time, though, there are five different mouse event methods we must implement:  </li>  <ul>    <li><strong><font color="#336699" face="Courier New, Courier, mono">mousePressed()</font></strong>, which is triggered when the mouse is on the component.</li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseClicked()</font></strong>, which is triggered when the mouse is pressed and released on the component. (<font face="Courier New, Courier, mono">mousePressed()</font> is called first.) </li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseReleased()</font></strong>, which is triggered when the mouse is released on the component. (<font face="Courier New, Courier, mono">mousePressed()</font> must have been called first.) </li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseEntered()</font></strong>, which is triggered upon entry to the component.</li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseExited()</font></strong>, which is triggered upon leaving the component. </li>  </ul></ol><p>Note that when we implement the <font face="Courier New, Courier, mono">MouseListener</font> interface, we <em>must</em> provide all five methods. The full headers look like this:</p><blockquote>  <pre>public void mousePressed(MouseEvent e)public void mouseClicked(MouseEvent e)public void mouseReleased(MouseEvent e)public void mouseEntered(MouseEvent e)public void mouseExited(MouseEvent e)</pre></blockquote><p>One workaround to not needing all five methods is to provide empty braces for those we don't need. Deitel presents another in Section 14.15. Likewise, you may want to learn more about <font face="Courier New, Courier, mono">MouseMotionListener</font> and <font face="Courier New, Courier, mono">MouseWheelListener</font>, which have some information in Deitel 14.14. </p><p>Here is an applet that demonstrates the various mouse events: </p><blockquote>  <p><applet code="EventDemo5.class" width="600" height="300"></applet></p></blockquote><p>Here is the code behind that applet:</p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;public class EventDemo5 extends JApplet implements MouseListener{    private int x;              // x coordinate of mouse event    private int y;              // y coordinate of mouse event    private String event;       // description of mouse event     @Override    public void init()                                // set up GUI             {        setLayout(new FlowLayout());            addMouseListener(this);                      // listen for mouse events        x = -1;                                      // set x negative for no initial message    }    @Override    public void paint(Graphics g)                    // draw message to screen                          {       super.paint(g);       g.drawRect(0, 0, getWidth(), getHeight());   // show bounds of applet       if(x != - 1)                                 // display event during repainting only        {          g.drawString("Mouse event " + event +                        " at (" + x + ", " + y + ")", <br>                       10, 50);       }    }    public void mousePressed(MouseEvent e)          // save coordinates of presses    {       x = e.getX();       y = e.getY();       event = "press";        repaint();    }    public void mouseClicked(MouseEvent e)          // save coordinates of clicks    {       x = e.getX();       y = e.getY();       event = "click";        repaint();    }    public void mouseReleased(MouseEvent e)          // save coordinates of releases    {       x = e.getX();       y = e.getY();       event = "release";        repaint();    }    public void mouseEntered(MouseEvent e)          // save coordinates when mouse enters applet    {       x = e.getX();       y = e.getY();       event = "enter";        repaint();    }    public void mouseExited(MouseEvent e)          // save coordinates when mouse leaves applet    {       x = e.getX();       y = e.getY();       event = "exit";        repaint();    }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a></font></p><hr><h2><font color="#FF6600"><a name="key"></a>Handling Key Events </font></h2><p>Java  allows us to listen for keyboard events. </p><p>Here's how we'll set up this key event handling: </p><ol>  <li>Add <strong><font color="#000066" face="Courier New, Courier, mono">implements KeyListener</font></strong>. </li>  <li>Key listening is based upon a particular component. For an applet, that's the whole applet. Thus, we only need the call <strong><font color="#990066" face="Courier New, Courier, mono">addKeyListener(this);</font></strong>. </li>  <li>Finally, we need to write code to handle the event. There are three different key event methods we must implement: <strong><font color="#336699" face="Courier New, Courier, mono">keyPressed()</font></strong>, <strong><font color="#336699" face="Courier New, Courier, mono">keyReleased()</font></strong>, and <strong><font color="#336699" face="Courier New, Courier, mono">keyTyped()</font></strong>. We can implement handlers as follows:    <ul>      <li>Class <font face="Courier New, Courier, mono">KeyEvent</font> has accessors <font face="Courier New, Courier, mono">getKeyCode()</font> and <font face="Courier New, Courier, mono">getKeyChar()</font> that get us information about the key. </li>      <li>We need to call <font face="Courier New, Courier, mono">getKeyCode()</font> inside a static call to <font face="Courier New, Courier, mono">KeyEvent.getKeyText()</font>, e.g. <font face="Courier New, Courier, mono">KeyEvent.getKeyText(e.getKeyCode());</font>.</li>    </ul>  </li></ol><p>The full headers for the three methods we must implement are:</p><blockquote>  <pre>public void keyPressed(KeyEvent e)public void keyReleased(KeyEvent e)public void keyTyped(KeyEvent e)</pre></blockquote><p>Here's an applet to demonstrate these events: </p><blockquote>  <p><applet code="EventDemo6.class" width="600" height="100"></applet></p></blockquote><p>Here is the code behind this applet:</p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;
import javax.swing.JApplet; public class EventDemo6 extends JApplet implements KeyListener{    private String event;                            // description of keyboard event     @Override    public void init()                               // set up UI                        {        setLayout(new FlowLayout()); 
        event = "";         addKeyListener(this);                        // listen for keyboard events
        setFocusable(true);                          // force applet to receive KeyEvent    }    @Override    public void paint(Graphics g)                    // draw message to applet                    {       super.paint(g);       g.drawRect(0, 0, getWidth(), getHeight());    // show bounds of applet       g.drawString(event, 10, 50);    }    public void keyPressed(KeyEvent e)               // handle key presses    {       event = e.getKeyChar() + " pressed";        repaint();    }    public void keyReleased(KeyEvent e)              // handle key releases    {       event = e.getKeyChar() + " released";          repaint();    }    public void keyTyped(KeyEvent e)                 // handle typing on applet    {       event = e.getKeyChar() + " typed";       repaint();    }} </pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a></font></p></body></html>