<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Event Handling</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center"><font color="#FF6600"> Event Handling </font></h1><p align="right"><font size="-1">Last Modified   <!-- #BeginDate format:Am2 -->3/3/11<!-- #EndDate --></font></p><p align="center">	<font size="1">		<a href="#intro">Event-Driven Programming</a> &bull;		<a href="#text">Text Fields and ActionListener</a> &bull;  		<a href="#getSource">Multiple Components</a> &bull;  		<a href="#buttons">Buttons</a> &bull;  		<a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull;  		<a href="#list">Lists</a> &bull;  		<a href="#mouse">Mouse Events</a> &bull;  		<a href="#key">Keyboard Events</a> &bull;  		<a href="#multiple">Multiple Interfaces</a> &bull;  		<a href="#changing">Changing GUIs</a>    	</font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="intro"></a>Event-Driven Programming </font></font></h2><p>We will now make a change in programming models. Thus far, we've been working with a programming model where we could look for the beginning of the main program and trace the execution from start to finish, even if that meant jumping out to external methods and classes for some code. Now, we'll work with the <strong>event-driven programming model</strong>, which is different in that...</p><ul>  <li>We don't know the order in which our methods will be called before runtime.</li>  <li>The control flow is largely determined by <strong>events</strong>, i.e. actions that are performed by the user interacting with the program.</li>  <li>We write code blocks to handle each of the various events we anticipate. (These are called <strong>event handlers</strong>.) </li></ul><p>The basic idea of how we'll implement event handling in Java involves several steps:</p><ol>  <li>When creating classes, we will implement an interface (or interfaces) for handling the events.     <ul>      <li><font face="Courier New, Courier, mono">ActionListener</font> is the interface for many GUI components. </li>      <li><font face="Courier New, Courier, mono">ItemListener</font> is the interface for radio buttons and checkboxes. </li>      <li><font face="Courier New, Courier, mono">ListSelectionListener</font> is the interface for lists. </li>      <li><font face="Courier New, Courier, mono">MouseListener</font> is the interface for mouse events. </li>      <li><font face="Courier New, Courier, mono">KeyListener</font> is the interface for keyboard events. </li>    </ul>  </li>  <li>Whenever we create GUI components that will trigger events, we must register them with the event handler. In other words, we must have code that says &quot;this widget could trigger an event you should be listening for.&quot;</li>  <li>We write code to handle the events that happen.Java will call the appropriate code at the appropriate time.     <ul>      <li>We have a general method called <font face="Courier New, Courier, mono">actionPerformed</font> that catches <font face="Courier New, Courier, mono">ActionListener</font> events. We'll generally check for the source of the event (which button, text field, etc. was it?) and then do something as a result of it. </li>      <li>Similarly we have general method called <font face="Courier New, Courier, mono">itemStateChanged</font> that catches <font face="Courier New, Courier, mono">ItemListener</font> events. We'll generally check for the source of the event (which checkbox, or radio button was it?) and then do something as a result of it. </li>      <li>There are specific methods in the mouse and keyboard interfaces we'll implement based of various events, e.g. clicks, double-clicks, right-clicks, some key was pressed, some key was released, etc. </li>    </ul>  </li></ol><p>Really, it is Steps 2 and 3 you'll need to consider as you add more event-handling functionality to your programs. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="text"></a>Text Fields and ActionListener </font></font></h2><p>Let's look at a first example of event handling. We'll make it so that when we hit enter in a text field, the text field is read. We'll base this off an example from last time and work in the context of an applet. Here's what we need to do:</p><ol>  <li>Tell the program that we're implementing an event-handling interface. For many GUI components, this means we add <strong><font color="#000066" face="Courier New, Courier, mono">implements ActionListener</font></strong> to the line where we define the class. (The same applies to applications.) </li>  <li>We need to register the text field as having an event attached to it. We do this for a GUI component by calling the method <font face="Courier New, Courier, mono">addActionListener()</font> on the GUI component. This method requires one argument, a reference to the applet, so we'll use keyword <font face="Courier New, Courier, mono">this</font>. So, to register the text field <font face="Courier New, Courier, mono">nameField</font> with the action listener, we add the line of code <strong><font color="#990066" face="Courier New, Courier, mono">nameField.addActionListener(this);</font></strong> before we add the text field to the GUI. </li>  <li>Finally, we need to write code to handle the event. This is done within the method <strong><font color="#336699" face="Courier New, Courier, mono">actionPerformed()</font></strong> as follows:    <ul>      <li> In this method, we write whatever code we want to happen when an event is triggered. </li>      <li>Since we only have only one event to handle, we don't yet worry about which GUI component triggered the event. </li>      <li>For a text field, we want to know what text was typed in. We can access this through the <font face="Courier New, Courier, mono">JTextField</font> accessor <font face="Courier New, Courier, mono">getText()</font>. </li>      <li>Since we're working with an applet and, in this case, displaying output via the <font face="Courier New, Courier, mono">paint()</font> method, we call <font face="Courier New, Courier, mono">repaint()</font>. </li>    </ul>  </li></ol><p>Note that when we implement the <font face="Courier New, Courier, mono">ActionListener</font> interface, we <em>must</em> provide the <font face="Courier New, Courier, mono">actionPerformed()</font> method. The full header looks like this:</p><blockquote>  <pre> public void actionPerformed(ActionEvent e)</pre></blockquote><p>&nbsp;</p><p>Consider the following code, which ties all of this together: </p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;import javax.swing.*;public class EventDemoText extends JApplet <strong><font color="#000066">implements ActionListener</font></strong>{    private JLabel nameLabel;                              // prompt for name    private JTextField nameField;                          // field to enter name    private String message;                                // message to read back to user        @Override    public void init()                                     // set up GUI                   {        setLayout(new FlowLayout());         message = "";                                      // initially, draw nothing                 nameLabel = new JLabel("Enter your name here:");   // create GUI for entering name        add(nameLabel);        nameField = new JTextField(10);        <strong><font color="#990066">nameField.addActionListener(this);</font></strong>                 // register name field w/ event handler        add(nameField);    }    @Override    public void paint(Graphics g)                          // display message string                            {       super.paint(g);       g.drawString(message, 10, 50);                      // print out entered name    }<strong><font color="#336699">    public void actionPerformed(ActionEvent e)             // process &quot;Enter&quot; in nameField    {        message = "Name entered was: " + nameField.getText();        repaint();                                           }</font></strong>}  </pre></blockquote><p>Here's the applet with these changes:</p><blockquote>  <p><applet code="EventDemoText.class" width="400" height="100"></applet> </p></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="getSource"></a>Distinguishing Between Events </font></font></h2><p>A GUI generally will have several components that could trigger events. We need to be able to distinguish:</p><ul>  <li>Notice that an <font face="Courier New, Courier, mono">ActionEvent</font> object is the parameter to <font face="Courier New, Courier, mono">actionPerformed()</font>.</li>  <li>Class <font face="Courier New, Courier, mono">ActionEvent</font> has an accessor <font face="Courier New, Courier, mono">getSource()</font> for determining what triggered the event. It returns (a reference to) the GUI component. </li>  <li>So, we generally have if statements for each of the GUI components that have listeners attached. </li></ul><p>Consider the following example, which adds a second text field and displays the text of only the field where the user presses Enter: </p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;import javax.swing.*;public class EventDemoText2 extends JApplet implements ActionListener{    private JLabel fNameLabel;                             // prompt for first name    private JTextField fNameField;                         // field to enter first name    private JLabel lNameLabel;                             // prompt for last name    private JTextField lNameField;                         // field to enter last name    private String message;                                // message to read back to user        @Override    public void init()                                     // set up GUI          {        setLayout(new FlowLayout());         message = "";                                      // initially, draw nothing                 fNameLabel = new JLabel("Enter first name here:"); // create GUI for entering first name        add(fNameLabel);        fNameField = new JTextField(10);        <strong><font color="#990066">fNameField.addActionListener(this);  </font></strong>              // register name field w/ event handler        add(fNameField);        lNameLabel = new JLabel("Enter your name here:");  // create GUI for entering last name        add(lNameLabel);        lNameField = new JTextField(10);        <strong><font color="#990066">lNameField.addActionListener(this); </font></strong>               // register name field w/ event handler        add(lNameField);    }    @Override    public void paint(Graphics g)                          // draw name to applet      {       super.paint(g);       g.drawString(message, 10, 50);                      // print out entered name    }    public void actionPerformed(ActionEvent e)             // process &quot;Enter&quot; in either text field         {        <strong><font color="#336699">if(e.getSource() == fNameField) </font></strong>                   // process first name entry        {           message = "Name entered was: " + fNameField.getText();        }        <strong><font color="#336699">if(e.getSource() == lNameField)  </font></strong>                  // process last name entry        {           message = "Name entered was: " + lNameField.getText();        }        repaint();                                           }}</pre></blockquote><p>Here is this applet in action:</p><blockquote>  <p><applet code="EventDemoText2.class" width="600" height="100"></applet> </p></blockquote><p>&nbsp;</p><p>Naturally, we could keep this up for several GUI components and we could also access the text from text fields besides the one that triggered the event. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="buttons"></a>Handling Buttons</font></font></h2><p>With buttons, the event we're looking for is the user clicking the button. Event handling is similar to text fields:</p><ul>  <li>We need to register the action listener with each button as before.</li>  <li>We need to have code in <font face="Courier New, Courier, mono">actionPerformed()</font> as before. </li>  <li>The <font face="Courier New, Courier, mono">getSource()</font> method can be used in conjunction with the button name.</li>  <li><font face="Courier New, Courier, mono">ActionEvent</font> accessor <font face="Courier New, Courier, mono">getActionCommand()</font> will return the label on a button as a String. </li></ul><p>Consider the following example:</p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;import javax.swing.*;public class EventDemo3 extends JApplet implements ActionListener{    private JLabel nameLabel;                              // prompt for name    private JTextField nameField;                          // field to enter name    private JButton okButton;                              // button to enter name    private JButton clearButton;                           // button to clear name    private String message;                                // message to read back to user        @Override    public void init()                                     // set up GUI               {        setLayout(new FlowLayout());              nameLabel = new JLabel("Enter your name here:");   // set up input for name text field        add(nameLabel);        nameField = new JTextField(10);        nameField.addActionListener(this);        add(nameField);        okButton = new JButton("OK");                      // set up OK button        <strong><font color="#990066">okButton.addActionListener(this);</font></strong>        add(okButton);         clearButton = new JButton("Clear");                // set up Clear button        <font color="#990066"><strong>clearButton.addActionListener(this);</strong></font>        add(clearButton);     }    @Override    public void paint(Graphics g)                          // draw message to applet                        {       super.paint(g);       g.drawString(message, 10, 50);    }    public void actionPerformed(ActionEvent e)            // process nameField, okButton, clearButton          {        if(e.getSource() == nameField)                    // process "Enter" in nameField        {           message = "Hit enter in text field; Name entered was: "                    + nameField.getText();        }        <strong><font color="#336699">if(e.getSource() == okButton)                    // process clicking "OK" button        {           message = "Clicked " + e.getActionCommand() + "; Name entered was: "                    + nameField.getText();               }        if(e.getSource() == clearButton)                 // process clicking "Clear" button        {           nameField.setText("");                        // clear the text field itself           message = "Clicked " + e.getActionCommand();        }</font></strong>        repaint();                                           }}  </pre></blockquote><p>Here's the applet running:</p><blockquote>  <p><applet code="EventDemo3.class" width="600" height="100"></applet></p></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="item"></a>Handling Checkboxes, Radio Buttons, and Drop-Down Lists </font></font></h2><p>Checkboxes, radio buttons, and drop-down lists are all handled via an interface called <font face="Courier New, Courier, mono">ItemListener</font> instead of <font face="Courier New, Courier, mono">ActionListener</font>. These GUI components are all part of the user interface and exist with some default state. Events on these components are triggered when their state changes, e.g.</p><ul>  <li>A checkbox is checked or unchecked</li>  <li>A radio button is turned on off</li>  <li>Which option or options in a list are selected changes</li></ul><p>Note that we <em>could</em> opt not to use ItemListener and instead process the state of these components when some button is clicked. What we'll look at here are events that are triggered every time the state of one of these components changes. </p><p>Here's how we'll set up this kind of event handling: </p><ol>  <li>Tell the program that we're implementing the correct kind of event-handling interface, which now means we add <strong><font color="#000066" face="Courier New, Courier, mono">implements ItemListener</font></strong>. </li>  <li>We need to register the component as having an event attached to it. We do this for a GUI component by calling the method <font face="Courier New, Courier, mono">addItemListener()</font> on the GUI component. This method also requires  a reference to the applet. So, to register the radio button <font face="Courier New, Courier, mono">radioRed</font> with the action listener, we add the code <strong><font color="#990066" face="Courier New, Courier, mono">radioRed.addItemListener(this);</font></strong>. </li>  <li>Finally, we need to write code to handle the event. This is done within the method <strong><font color="#336699" face="Courier New, Courier, mono">itemStateChanged()</font></strong> as follows:      <ul>        <li> In this method, we again write whatever code we want to happen when an event is triggered on a component with the item listener attached. </li>        <li>Class <font face="Courier New, Courier, mono">ItemEvent</font> also has a <font face="Courier New, Courier, mono">getSource()</font> accessor that we use like with did with <font face="Courier New, Courier, mono">ActionListener</font>. </li>        <li>Class <font face="Courier New, Courier, mono">ItemEvent</font> has a <font face="Courier New, Courier, mono">getStateChange()</font> accessor that will return either <font face="Courier New, Courier, mono">ItemEvent.SELECTED</font> or <font face="Courier New, Courier, mono">ItemEvent.DESELECTED</font>. </li>        <li>Class <font face="Courier New, Courier, mono">JComboBox</font> has accessor <font face="Courier New, Courier, mono">getSelectedIndex()</font>, which returns the index of whatever element was selected, and accessor <font face="Courier New, Courier, mono">getSelectedItem()</font>, which returns the value of whatever element was selected. </li>      </ul>  </li></ol><p>Note that when we implement the <font face="Courier New, Courier, mono">ItemListener</font> interface, we <em>must</em> provide the <font face="Courier New, Courier, mono">itemStateChanged()</font> method. The full header looks like this:</p><blockquote>  <pre> public void itemStateChanged(ItemEvent e)</pre></blockquote><p>&nbsp;</p><p>Consider this complete example of handling radio buttons for choosing the color of a message: </p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;import java.awt.Color; import javax.swing.*;public class EventDemo4 extends JApplet <strong><font color="#000066">implements ItemListener</font></strong>{    private JRadioButton radioBlack;                       // radio button for black    private JRadioButton radioRed;                         // radio button for red    private JRadioButton radioGreen;                       // radio button for green    private JRadioButton radioBlue;                        // radio button for blue    private Color textColor;                               // color to display message    @Override    public void init()                                   // set up GUI                {        ButtonGroup  radioColors;                        // logical linkage for color buttons		        setLayout(new FlowLayout());         textColor = Color.BLACK;                         // initially write in black             add(new JLabel("Choose a color: "));             // set up prompt        radioBlack = new JRadioButton("Black", true);    // create radio buttons        radioRed = new JRadioButton("Red", false);        radioGreen = new JRadioButton("Green", false);        radioBlue = new JRadioButton("Blue", false);<strong><font color="#990066">        radioBlack.addItemListener(this);                // add listeners to them        radioRed.addItemListener(this);         radioGreen.addItemListener(this);         radioBlue.addItemListener(this); </font></strong>        add(radioBlack);                                 // add them to GUI        add(radioRed);        add(radioGreen);        add(radioBlue);        radioColors = new ButtonGroup();                 // logically link buttons        radioColors.add(radioBlack);        radioColors.add(radioRed);        radioColors.add(radioGreen);        radioColors.add(radioBlue);    }    @Override    public void paint(Graphics g)                          // draw text to applet in color         {        super.paint(g);        g.setColor(textColor);                             // change color as chosen        g.drawString("Welcome to event handling", 10, 50);    }    <strong><font color="#336699">public void itemStateChanged(ItemEvent e)               // handle radio button changes    {        if(e.getSource() == radioBlack && e.getStateChange() == ItemEvent.SELECTED)    // black chosen        {            textColor = Color.BLACK;        }        if(e.getSource() == radioRed && e.getStateChange() == ItemEvent.SELECTED)      // red chosen        {            textColor = Color.RED;        }        if(e.getSource() == radioGreen && e.getStateChange() == ItemEvent.SELECTED)    // green chosen        {            textColor = Color.GREEN;        }        if(e.getSource() == radioBlue && e.getStateChange() == ItemEvent.SELECTED)     // blue chosen        {            textColor = Color.BLUE;        }        repaint();                                           }</font></strong>}</pre></blockquote><p>&nbsp;</p><p>Here is that applet in action:</p><blockquote>  <p><applet code="EventDemo4.class" width="600" height="100"></applet> </p></blockquote><p>&nbsp;</p><p>Here's an example of the ItemListener for a drop-down list: </p><blockquote>  <pre>public void itemStateChanged(ItemEvent e)           // handle colorMenu changes{    if(e.getSource() == colorMenu)    {        JOptionPane.showMessageDialog(null, colorMenu.getSelectedIndex() +                                     ": " + colorMenu.getSelectedItem());    }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#FF6600"><a name="list"></a>Handling Lists </font></h2><p>Lists are  handled via an interface called <font face="Courier New, Courier, mono">ListSelectionListener</font> and events are triggered whenever there is a change in which option or options in a list are selected.</p><p>Here's how we'll set up this kind of event handling: </p><ol>  <li>Tell the program that we're implementing the correct kind of event-handling interface, which now means we add <strong><font color="#000066" face="Courier New, Courier, mono">implements ListSelectionListener</font></strong>. </li>  <li>We need to register the text field as having an event attached to it. We do this for a list by calling the method <font face="Courier New, Courier, mono">addListSelectionListener()</font> on the list. This method also requires a reference to the applet. So, to register the list <font face="Courier New, Courier, mono">colorList</font> with the action listener, we add the code <strong><font color="#990066" face="Courier New, Courier, mono">colorList.addListSelectionListener(this);</font></strong>. </li>  <li>Finally, we need to write code to handle the event. This is done within the method <strong><font color="#336699" face="Courier New, Courier, mono">valueChanged()</font></strong> as follows:      <ul>        <li> In this method, we again write whatever code we want to happen when an event is triggered on a component with the list selection listener attached. </li>        <li>Class <font face="Courier New, Courier, mono">ListSelectionEvent</font> again has a <font face="Courier New, Courier, mono">getSource()</font> accessor.</li>        <li>Class <font face="Courier New, Courier, mono">JList</font> has accessors <font face="Courier New, Courier, mono">getSelectedIndex()</font>, <font face="Courier New, Courier, mono">getSelectedIndices()</font>, <font face="Courier New, Courier, mono"></font><font face="Courier New, Courier, mono">getSelectedValue()</font>, and <font face="Courier New, Courier, mono">getSelectedValues()</font>, <font face="Courier New, Courier, mono"></font>which behave similarly to their counterparts for item listeners. </li>      </ul>  </li></ol><p>Note that when we implement the <font face="Courier New, Courier, mono">ListSelectionListener</font> interface, we <em>must</em> provide the <font face="Courier New, Courier, mono">valueChanged()</font> method. The full header looks like this:</p><blockquote>  <pre> public void valueChanged(ListSelectionEvent e)</pre></blockquote><p>&nbsp;</p><p>Here's an example of the <font face="Courier New, Courier, mono">valueChanged()</font> method:</p><blockquote>  <pre>public void valueChanged(ListSelectionEvent e)     // Handle colorList<br>{<br>   if(e.getSource() == colorList)                  // Handle color choice changes<br>   {<br>       for(Object val : colorList.getSelectedValues())<br>       {<br>           JOptionPane.showMessageDialog(null, val.toString() + &quot; was selected&quot;);<br>       }    }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#FF6600"><a name="mouse"></a>Handling Mouse Events </font></h2><p>Java also allows us to listen for mouse events. Essentially, we'd use these events to know where the mouse is, either with respect to a GUI component or in terms of <em>x</em> and <em>y</em> coordinates. </p><p>Here's how we'll set up this mouse event handling: </p><ol>  <li>Add <strong><font color="#000066" face="Courier New, Courier, mono">implements MouseListener</font></strong>. </li>  <li>Mouse listening is based upon a particular component. For an applet, that's the whole applet. Thus, we only need the call <strong><font color="#990066" face="Courier New, Courier, mono">addMouseListener(this);</font></strong>. </li>  <li>Finally, we need to write code to handle the event. Class <font face="Courier New, Courier, mono">MouseEvent</font> has accessors <font face="Courier New, Courier, mono">getX()</font> and <font face="Courier New, Courier, mono">getY()</font> that get us the coordinates of where the event occurred. We can store these an use them in other methods. (For example, we could store them and use them in <font face="Courier New, Courier, mono">paint()</font> to draw something.) This time, though, there are five different mouse event methods we must implement:  </li>  <ul>    <li><strong><font color="#336699" face="Courier New, Courier, mono">mousePressed()</font></strong>, which is triggered when the mouse is on the component.</li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseClicked()</font></strong>, which is triggered when the mouse is pressed and released on the component. (<font face="Courier New, Courier, mono">mousePressed()</font> is called first.) </li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseReleased()</font></strong>, which is triggered when the mouse is released on the component. (<font face="Courier New, Courier, mono">mousePressed()</font> must have been called first.) </li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseEntered()</font></strong>, which is triggered upon entry to the component.</li>      <li><strong><font color="#336699" face="Courier New, Courier, mono">mouseExited()</font></strong>, which is triggered upon leaving the component. </li>  </ul></ol><p>Note that when we implement the <font face="Courier New, Courier, mono">MouseListener</font> interface, we <em>must</em> provide all five methods. The full headers look like this:</p><blockquote>  <pre>public void mousePressed(MouseEvent e)public void mouseClicked(MouseEvent e)public void mouseReleased(MouseEvent e)public void mouseEntered(MouseEvent e)public void mouseExited(MouseEvent e)</pre></blockquote><p>One workaround to not needing all five methods is to provide empty braces for those we don't need. Deitel presents another in Section 14.15. Likewise, you may want to learn more about <font face="Courier New, Courier, mono">MouseMotionListener</font> and <font face="Courier New, Courier, mono">MouseWheelListener</font>, which have some information in Deitel 14.14. </p><p>Here is an applet that demonstrates the various mouse events: </p><blockquote>  <p><applet code="EventDemo5.class" width="600" height="300"></applet></p></blockquote><p>Here is the code behind that applet:</p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;public class EventDemo5 extends JApplet implements MouseListener{    private int x;              // x coordinate of mouse event    private int y;              // y coordinate of mouse event    private String event;       // description of mouse event     @Override    public void init()                                // set up GUI             {        setLayout(new FlowLayout());            addMouseListener(this);                      // listen for mouse events        x = -1;                                      // set x negative for no initial message    }    @Override    public void paint(Graphics g)                    // draw message to screen                          {       super.paint(g);       g.drawRect(0, 0, getWidth(), getHeight());   // show bounds of applet       if(x != - 1)                                 // display event during repainting only        {          g.drawString("Mouse event " + event + " at (" + x + ", " + y + ")", 10, 50);       }    }    public void mousePressed(MouseEvent e)          // save coordinates of presses    {       x = e.getX();       y = e.getY();       event = "press";        repaint();    }    public void mouseClicked(MouseEvent e)          // save coordinates of clicks    {       x = e.getX();       y = e.getY();       event = "click";        repaint();    }    public void mouseReleased(MouseEvent e)          // save coordinates of releases    {       x = e.getX();       y = e.getY();       event = "release";        repaint();    }    public void mouseEntered(MouseEvent e)          // save coordinates when mouse enters applet    {       x = e.getX();       y = e.getY();       event = "enter";        repaint();    }    public void mouseExited(MouseEvent e)          // save coordinates when mouse leaves applet    {       x = e.getX();       y = e.getY();       event = "exit";        repaint();    }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#FF6600"><a name="key"></a>Handling Key Events </font></h2><p>Java  allows us to listen for keyboard events. </p><p>Here's how we'll set up this key event handling: </p><ol>  <li>Add <strong><font color="#000066" face="Courier New, Courier, mono">implements KeyListener</font></strong>. </li>  <li>Key listening is based upon a particular component. For an applet, that's the whole applet. Thus, we only need the call <strong><font color="#990066" face="Courier New, Courier, mono">addKeyListener(this);</font></strong>. </li>  <li>Finally, we need to write code to handle the event. There are three different key event methods we must implement: <strong><font color="#336699" face="Courier New, Courier, mono">keyPressed()</font></strong>, <strong><font color="#336699" face="Courier New, Courier, mono">keyReleased()</font></strong>, and <strong><font color="#336699" face="Courier New, Courier, mono">keyTyped()</font></strong>. We can implement handlers as follows:    <ul>      <li>Class <font face="Courier New, Courier, mono">KeyEvent</font> has accessors <font face="Courier New, Courier, mono">getKeyCode()</font> and <font face="Courier New, Courier, mono">getKeyChar()</font> that get us information about the key. </li>      <li>We need to call <font face="Courier New, Courier, mono">getKeyCode()</font> inside a static call to <font face="Courier New, Courier, mono">KeyEvent.getKeyText()</font>, e.g. <font face="Courier New, Courier, mono">KeyEvent.getKeyText(e.getKeyCode());</font>.</li>    </ul>  </li></ol><p>The full headers for the three methods we must implement are:</p><blockquote>  <pre>public void keyPressed(KeyEvent e)public void keyReleased(KeyEvent e)public void keyTyped(KeyEvent e)</pre></blockquote><p>Here's an applet to demonstrate these events: </p><blockquote>  <p><applet code="EventDemo6.class" width="600" height="100"></applet></p></blockquote><p>Here is the code behind this applet:</p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;public class EventDemo6 extends JApplet implements KeyListener{    private String event;                            // description of keyboard event     @Override    public void init()                               // set up UI                        {        setLayout(new FlowLayout());         addKeyListener(this);                        // listen for keyboard events    }    @Override    public void paint(Graphics g)                    // draw message to applet                    {       super.paint(g);       g.drawRect(0, 0, getWidth(), getHeight());    // show bounds of applet       g.drawString(event, 10, 50);    }    public void keyPressed(KeyEvent e)               // handle key presses    {       event = e.getKeyChar() + " pressed";        repaint();    }    public void keyReleased(KeyEvent e)              // handle key releases    {       event = e.getKeyChar() + " released";          repaint();    }    public void keyTyped(KeyEvent e)                 // handle typing on applet    {       event = e.getKeyChar() + " typed";       repaint();    }} </pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#FF6600"><a name="multiple"></a>Implementing Multiple Interfaces </font></h2><p>Notice that all of the event handling techniques are implemented via <em>interfaces</em>, not classes. This is very important. Remember that we can only extend one class, but we can implement many interfaces.</p><p>Thus, if we want to use multiple kinds of event listeners in the same program, we can. We simply list them with commas in between. Here's an example:</p><blockquote>  <pre>public class Demo extends JApplet<strong><font color="#000066"> implements ActionListener, ItemListener, MouseListener</font></strong> </pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a>  &bull; <a href="#changing">Changing GUIs</a> </font></p><hr><h2><font color="#FF6600"><a name="changing" id="changing"></a>Changing GUIs </font></h2><p>You may want to write event handlers that change an existing GUI. </p><p>There's a <font face="Courier New, Courier, mono">remove(<em>guiComponent</em>)</font> method you can use just like the <font face="Courier New, Courier, mono">add(<em>guiComponent</em>)</font> method, with which you are familiar. </p><p>If you change the GUI components on an applet, call the method <font face="Courier New, Courier, mono">validate();</font> afterward to force correct redrawing of the GUI. </p><p align="center">&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#intro">Event-Driven Programming</a> &bull; <a href="#text">Text Fields and ActionListener</a> &bull; <a href="#getSource">Multiple Components</a> &bull; <a href="#buttons">Buttons</a> &bull; <a href="#item">Checkboxes/Radio Buttons/Drop-Downs</a> &bull; <a href="#list">Lists</a> &bull; <a href="#mouse">Mouse Events</a> &bull; <a href="#key">Keyboard Events</a> &bull; <a href="#multiple">Multiple Interfaces</a> &bull; <a href="#changing">Changing GUIs</a> </font></p></body></html>