<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Applets</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center"><font color="#336699">Applets</font></h1><p align="right"><font size="-1">Last Modified   <!-- #BeginDate format:Am2 -->2/24/11<!-- #EndDate --></font></p><p align="center">	<font size="1">		<a href="#hello">Hello World Applet</a> &bull;		<a href="#html">HTML File</a> &bull; 		<a href="#gen_form">General Structure</a> &bull; 		<a href="#methods">Methods</a> &bull; 		<a href="#ex">Example</a> &bull; 		<a href="#update">Update Method</a>   	</font></p><hr><h2><font color="#990033"><font color="#006699"><a name="hello"></a>Hello World, Applet Style </font></font></h2><p>We'll now look at a kind of Java program called an <strong>applet</strong>, designed to be used on the web. Consider the following code for a &quot;Hello, World&quot; program: </p><blockquote>  <pre>import java.awt.Graphics;import javax.swing.JApplet;public class HelloApplet extends JApplet{    @Override    public void paint(Graphics g)    {       super.paint(g);       g.drawString("Hello, Applet World!", 10, 20);    }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#hello">Hello World Applet</a> &bull; <a href="#html">HTML File</a> &bull; <a href="#gen_form">General Structure</a> &bull; <a href="#methods">Methods</a> &bull; <a href="#ex">Example</a>  &bull; <a href="#update">Update Method</a> </font></p><hr><h2><font color="#006699"><a name="html"></a>Embedding Applets in HTML </font></h2><p>We need to compile an applet to get the <font face="Courier New, Courier, mono">.class</font> file. Then, we need to write code to run that applet on a web page. Here is code to create a very basic web page that contains the applet we just wrote and nothing more: </p><blockquote>  <pre>&lt;html&gt;   &lt;applet code=&quot;HelloApplet.class&quot; width=&quot;200&quot; height=&quot;30&quot;&gt;&lt;/applet&gt;<br>&lt;/html&gt;</pre></blockquote><p>This code creates an <strong>HTML tag</strong> for the applet. The <font face="Courier New, Courier, mono">applet</font> tag has three parameters:</p><ul>  <li><font face="Courier New, Courier, mono">code</font>, the path of the <font face="Courier New, Courier, mono">.class</font> file</li>  <li><font face="Courier New, Courier, mono">width</font>, the applet's width in pixels or  as a percentage followed by <font face="Courier New, Courier, mono">%</font>, e.g. <font face="Courier New, Courier, mono">width=&quot;95%&quot;</font></li>  <li><font face="Courier New, Courier, mono">height</font>, the applet's height in pixels or as a percentage followed by <font face="Courier New, Courier, mono">%</font> </li></ul><p>Note and emulate the syntax above.</p><p>To view this applet on the web, we'd need to upload both the <font face="Courier New, Courier, mono">.htm</font> and <font face="Courier New, Courier, mono">.class</font> files. Note that we do <strong>not</strong> need to upload the source code file, i.e. the <font face="Courier New, Courier, mono">.java</font> file and should not. </p><p><a href="hello_applet.htm" target="_blank">View the HTML page created above.</a></p><p>&nbsp;</p><h3><font color="#990033"><font color="#006699">Testing Applets During Development </font></font></h3><p>When you develop an applet, it's handy to use the command line tool <font face="Courier New, Courier, mono">appletviewer</font> to test them. It takes one argument, the name of the applet's HTML page, e.g.</p><blockquote>  <pre>appletviewer hello-applet.html </pre></blockquote><p>Note that we can't use percentages for the <font face="Courier New, Courier, mono">width</font> and <font face="Courier New, Courier, mono">height</font> attributes of applets if we're using this tool (but that practice is preferred for applets really running on the web). Rather, when the window is resized, applets resize to fill the window. </p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#hello">Hello World Applet</a> &bull; <a href="#html">HTML File</a> &bull; <a href="#gen_form">General Structure</a> &bull; <a href="#methods">Methods</a> &bull; <a href="#ex">Example</a>  &bull; <a href="#update">Update Method</a> </font></p><hr><h2><font color="#990033"><font color="#006699"><a name="gen_form"></a>General Structure </font></font></h2><p>Below  is a general framework for a basic Applet that allows user interactivity. Code in green is standard applet code and code in blue is necessary for applets that allow interaction and event handling. We'll look at an example of event handling below, but go into the details of event handling much more in an upcoming class. </p><blockquote>  <pre><strong><font color="#006633">import java.awt.FlowLayout;import java.awt.Graphics;<font color="#0000CC">import java.awt.event.*;</font>import javax.swing.*;public class</font></strong> AppletName <strong><font color="#006633">extends JApplet <font color="#0000CC">implements ActionListener</font>{</font></strong>    // Declarations of class-wide variables<strong><font color="#006633">    @Override    public void init()                                {        setLayout(new FlowLayout());      </font></strong>        // Code to set up the GUI    <strong><font color="#006633">}    @Override    public void paint(Graphics g)                            {       super.paint(g);</font></strong>       // Code for drawing objects on the applet   <strong> <font color="#006633">}</font>    <font color="#000099">public void actionPerformed(ActionEvent e)               {</font></strong>        // Code for processing user actions<strong><font color="#000099">        repaint();                                           }</font></strong><font color="#006633"><strong>}</strong></font></pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#hello">Hello World Applet</a> &bull; <a href="#html">HTML File</a> &bull; <a href="#gen_form">General Structure</a> &bull; <a href="#methods">Methods</a> &bull; <a href="#ex">Example</a>  &bull; <a href="#update">Update Method</a> </font></p><hr><h2><font color="#990033"><font color="#006699"><a name="methods"></a>Methods and the Startup Sequence</font></font></h2><p>When an applet is run, the following methods are run in order:</p><ol>  <li><font face="Courier New, Courier, mono">init() </font></li>  <li><font face="Courier New, Courier, mono">start() </font></li>  <li><font face="Courier New, Courier, mono">paint() </font></li></ol><p>If you do not include any of these methods, superclass versions from <font face="Courier New, Courier, mono">JApplet</font> are run instead. </p><p>Let's look at the formal headers for these methods and describe what they do in more detail: </p><ul>  <li><font face="Courier New, Courier, mono">public void init() </font>        <ul>      <li>Runs once when the applet is loaded.</li>      <li>Like a constructor.</li>      <li>Contains code to set up any GUI components on the applet. </li>      <li>Could contain code for popup windows that initialize variables.</li>    </ul>  </li>  <li><font face="Courier New, Courier, mono">public void start() </font>    <ul>      <li>Runs after <font face="Courier New, Courier, mono">init()</font> and anytime after the user leaves the applet's page and then comes back. </li>      <li>Contains code that must run any time the page is visited. </li>    </ul>  </li>  <li><font face="Courier New, Courier, mono">public void paint(Graphics g) </font>    <ul>      <li>Runs after <font face="Courier New, Courier, mono">init()</font> and <font face="Courier New, Courier, mono">start()</font>. </li>      <li>Also runs if the applet needs to be repainted, which is triggered using the call <font face="Courier New, Courier, mono">repaint() </font>elsewhere. </li>      <li>Contains code to draw on the applet. </li>    </ul>  </li></ul><p>Naturally, in overriding any of these methods, you must match the given headers. </p><p>See Deitel Section 23.4 for information on <font face="Courier New, Courier, mono">stop()</font> and <font face="Courier New, Courier, mono">destroy()</font> methods you may also opt to include. </p><p>Not part of the applet's life cycle, but commonly used, is the following event handling method: </p><ul>  <li><font face="Courier New, Courier, mono">public void actionPerformed(ActionEvent e) </font>      <ul>        <li>Runs every time any event tagged with an &quot;action listener&quot; occurs on the applet. </li>        <li>Contains code to respond to events. Code could be specific to the kinds of events, which would require selection logic, or not, if only one kind of event is possible. </li>      </ul>  </li></ul><p>So...</p><ul>  <li>We could make a simple applet that does only drawing by including only the <font face="Courier New, Courier, mono">paint()</font> method.</li>  <li>We could make an applet that prompts the user for inputs via dialog boxes by placing those dialog box calls in the <font face="Courier New, Courier, mono">init()</font> method and then providing a <font face="Courier New, Courier, mono">paint()</font> method. </li>  <li>We could make an applet that uses GUI components and allows user interaction by providing an <font face="Courier New, Courier, mono">init()</font> method to set up the GUI, an <font face="Courier New, Courier, mono">actionPerformed()</font> method to handle events, and a <font face="Courier New, Courier, mono">paint()</font> method to draw (and redraw) the applet. </li></ul><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#hello">Hello World Applet</a> &bull; <a href="#html">HTML File</a> &bull; <a href="#gen_form">General Structure</a> &bull; <a href="#methods">Methods</a> &bull; <a href="#ex">Example</a>  &bull; <a href="#update">Update Method</a> </font></p><hr><h2><font color="#990033"><font color="#006699"><a name="ex"></a>In-Depth Example </font></font></h2><p>Let's discuss the following example applet that demonstrates GUI components and event handling to draw a circle: </p><blockquote>  <pre>import java.awt.FlowLayout;import java.awt.Graphics;import java.awt.event.*;import javax.swing.*;public class CircleApplet2 extends JApplet implements ActionListener{    private JLabel description;              // Describes program's functionality    private JLabel promptCenterX;            // Prompt for center x-coordinate    private JLabel promptCenterY;            // Prompt for center y-coordinate    private JLabel promptRadius;             // Prompt for radius    private JTextField inCenterX;            // Field to input center x-coordinate    private JTextField inCenterY;            // Field to input center y-coordinate    private JTextField inRadius;             // Field to input radius    private int centerX;                     // Center x-coordinate of circle to draw    private int centerY;                     // Center y-coordinate of circle to draw    private int radius;                      // Radius of circle to draw    @Override    public void init()                            // Set up GUI, initialize variables    {        setLayout(new FlowLayout());        description = new JLabel("This program will draw a circle.");        add(description);        promptCenterX = new JLabel("Enter center x-coordinate: "); // Set up input        add(promptCenterX);                                        // for x-coord.        inCenterX = new JTextField(5);        add(inCenterX);        promptCenterY = new JLabel("Enter center y-coordinate: "); // Set up input        add(promptCenterY);                                        // for y-coord.        inCenterY = new JTextField(5);        add(inCenterY);        promptRadius = new JLabel("Enter radius and hit Enter:"); // Set up input        add(promptRadius);                                        // for radius        inRadius = new JTextField(5);        inRadius.addActionListener(this);                         // Process upon enter        add(inRadius);    }    @Override    public void paint(Graphics g)                        // Display results    {       int startX;                                       // Upper left x of bounding rect.       int startY;                                       // Upper left y of bounding rect.	          super.paint(g);       startX = centerX - radius;                        // Move by radius to get top corner       startY = centerY - radius;       g.drawOval(startX, startY, radius*2, radius*2);   // Draw circle    }    public void actionPerformed(ActionEvent e)           // Process user actions    {        centerX = Integer.parseInt(inCenterX.getText()); // Store user inputs        centerY = Integer.parseInt(inCenterY.getText());        radius  = Integer.parseInt(inRadius.getText());        repaint();                                       // Redraw circle    }}</pre></blockquote><p><a href="circle_applet.htm" target="_blank">View this applet running.</a> </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#hello">Hello World Applet</a> &bull; <a href="#html">HTML File</a> &bull; <a href="#gen_form">General Structure</a> &bull; <a href="#methods">Methods</a> &bull; <a href="#ex">Example</a>  &bull; <a href="#update">Update Method</a> </font></p><hr><h2><font color="#990033"><font color="#006699"><a name="update" id="update"></a>More on Repainting </font></font></h2><p>If you want to make it so graphics drawn on an applet are not cleared upon repainting, you can override the <font face="Courier New, Courier, mono">update()</font> method as follows:</p><blockquote>  <pre>public void update(Graphics g){   paint(g);}</pre></blockquote><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#hello">Hello World Applet</a> &bull; <a href="#html">HTML File</a> &bull; <a href="#gen_form">General Structure</a> &bull; <a href="#methods">Methods</a> &bull; <a href="#ex">Example</a> &bull; <a href="#update">Update Method</a> </font></p></body></html>