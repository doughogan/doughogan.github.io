<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Inheritance</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><style type="text/css"><!--.style6 {color: #336666}.style7 {font-family: "Courier New", Courier, mono}.style9 {	font-family: "Courier New", Courier, mono;	color: #FF6600;	font-weight: bold;}.style10 {	color: #FF6600;	font-weight: bold;}.style12 {font-family: "Courier New", Courier, mono; font-weight: bold; }--></style></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center" class="style6">Inheritance</h1><p align="right"><font size="-1">Last Modified <!-- #BeginDate format:Am2 -->1/3/11<!-- #EndDate --></font></p><p align="center"><font size="1">		<a href="#idea">The Idea</a> &bull; 		<a href="#ex">Example Hierarchies</a> &bull; 		<a href="#extends">Defining Subclasses</a> &bull; 		<a href="#protected">Access Rights (protected)</a> &bull; 		<a href="#super">super</a> &bull; 		<a href="#object">Object class</a> &bull; 		<a href="#next">Next steps</a>   </font></p><hr><h2><font color="#990033"><a name="idea"></a></font><span class="style6">The Idea </span></h2><p>The idea of <strong>inheritance</strong> allows us to create classes that build upon other classes:</p><ul>  <li>When we are modeling related concepts, often we can simply take an existing class and extend it, rather than creating an entirely new class. </li>  <li>The original class is called the <strong>base class</strong>. The class that builds upon this is called a <strong>subclass</strong>. </li>  <li>We can extend this notion beyond one step, forming a structure like a tree called an <strong>inheritance hierarchy</strong>. In this spirit, the parent of a subclass is not only called a base class, but also a <strong>superclass</strong> to the subclass.</li>  <li>We can implement inheritance such that a subclass can use the data members and methods of the superclass.     <ul>      <li>Access may be direct or via the class interface.</li>      <li>Subclass typically adds more data or behavior. </li>      <li>Subclass often adds more <em>specific </em>behavior. May take a method from the superclass and implement in a more specific way, which we call <strong>overriding</strong> the existing method. </li>    </ul>  </li>  <li>We avoid code repetition this way, in turn reducing the chance for error and maintenance costs.</li>  <li>We can bend the idea of homogenous collections this way, i.e. create an array of superclass objects, but the objects could really be of different subclass types. </li></ul><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p><hr><h2><span class="style6"><a name="ex"></a>Example Inheritance Hierarchies</span></h2><p>We'll look at two different inheritance hierarchy examples here. See Chapter 9 for a detailed example of an Employee hierarchy too. </p><h3 class="style6">Shapes</h3><p>A classic, natural example of inheritance comes from geometry. Here's part of a hierarchy for shapes:</p><ul>  <li>Shape    <ul>      <li>TwoDimensionalShape        <ul>          <li>Circle</li>          <li>Polygon            <ul>              <li>Triangle                  <ul>                    <li>Right</li>                    <li>Equilateral</li>                    <li>Isosceles</li>                  </ul>              </li>              <li>Quadrilateral                  <ul>                    <li>Parallelogram                        <ul>                          <li>Rectangle                              <ul>                                <li>Square</li>                              </ul>                          </li>                          <li>Rhombus</li>                        </ul>                    </li>                    <li>Trapezoid</li>                  </ul>              </li>              <li>NGon</li>            </ul>          </li>        </ul>      </li>      <li>ThreeDimensionalShape</li>    </ul>  </li></ul><p>&nbsp;</p><h3 class="style6">Hands of Playing Cards</h3><p>Suppose we're building a suite of card games and want a class to model a hand of cards. Let's first say we're using classes together and have a <span class="style7">Card</span> class, where cards know their suits and denominations, accessible via pubic accessors <span class="style7">GetSuit()</span> and <span class="style7">GetDenomination()</span>, both of which return Strings. Suppose the HandOfCards class then has two private data members:</p><blockquote>  <pre>private Card[] hand;      // the cards that make up a handprivate int numCards;     // how many cards are in this hand</pre></blockquote><p><strong>Question: </strong>For a given game, a specific number of cards is dealt. This might be a third data member. How might we define it in the <span class="style7">HandOfCards</span> class? </p><p>&nbsp; </p><p>Now then, our inheritance hierarchy could be just one level deep and have subclasses for different card games:</p><ul>  <li>HandOfCards    <ul>      <li>BlackjackHand</li>      <li>PokerHand</li>      <li>RummyHand</li>    </ul>  </li></ul><p>(We could go on listing games forever, but we won't...) </p><p>In the subclasses, we would have different behavior, for example, scoring, based upon the different games. We might add extra data members too. For example, in blackjack, we'd want to keep track of the value of a hand and whether or not it has exceeded 21. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p><hr><h2><span class="style6"><a name="extends"></a>Setting Up Classes with Inheritance</span></h2><p>Creating a class that is a subclass of another class is much like creating any other class. We simple add the keyword <span class="style9">extends</span> and the name of the superclass when we define the class. Here are some examples from the hierarchies above: </p><p><strong>Example 1: </strong></p><blockquote>  <pre>public class TwoDimensionalShape <span class="style10">extends Shape</span>{   //...}</pre></blockquote><p><strong>Example 2: </strong></p><blockquote>  <pre>public class BlackjackHand <span class="style10">extends HandOfCards</span>{   //...}</pre></blockquote><p><strong>Problem: </strong>Working in the shapes hierarchy above, write the first line of the class definition for Trapezoid. </p><p>&nbsp;</p><p>&nbsp;</p><p>Note, by the way, that you can also declare a class <span class="style7">final</span>, which means it cannot be extended. </p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p><hr><h2><span class="style6"><a name="protected"></a>Access Rights and <span class="style7">protected</span> Data Members </span></h2><p>We now add a third access specifier to our toolkit. But, let's also be more specific about the ones we already know: </p><ul>  <li><span class="style7"><strong>public</strong></span> members can be accessed by any class.</li>  <li><span class="style7"><strong>private</strong></span> members can only accessed by the class in which they are defined. This is interpreted strictly: even subclasses <em>cannot</em> access private members of  superclasses. </li>  <li><span class="style7"><strong>protected</strong></span> members can be accessed by the class in which they are defined and in subclasses of that class, but not in other classes. </li></ul><p>Let's look at our shapes hierarchy. Why does the following example  <strong>not</strong> work?</p><blockquote>  <pre>public class Polygon extends TwoDimensionalShape{   private double xLoc;        // x coordinate of a corner of the polygon   private double yLoc;        // y coordinate of the same corner      //...   public String toString()   // POST: FCTVAL == string representation of the Polygon<br>   {<br>       return &quot;Polygon at (&quot; + xLoc + &quot;, &quot; + yLoc + &quot;)&quot;;<br>   }}public class Triangle extends Polygon{   // Intend to use inherited location for first corner   private double xLoc2;        // x coordinate of 2nd point of triangle   private double yLoc2;        // y coordinate of 2nd point of triangle   private double xLoc3;        // x coordinate of 3rd point of triangle   private double yLoc3;        // y coordinate of 3rd point of triangle   //...      public String toString()   // POST: FCTVAL == String representation of the Triangle   {      return &quot;Triangle at (&quot; + xLoc + &quot;, &quot; + yLoc + &quot;), (&quot;                             + xLoc2 + &quot;, &quot; + yLoc2 + &quot;), (&quot;                             + xLoc3 + &quot;, &quot; + yLoc3 + &quot;)&quot;;   }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>Now, let's modify the superclass to allow the proposed Triangle <span class="style7">toString()</span> to work: </p><blockquote>  <pre>public class Polygon extends TwoDimensionalShape{   <span class="style10">protected</span> double xLoc;        // x coordinate of a corner of the polygon   <span class="style10">protected</span> double yLoc;        // y coordinate of the same corner      //...}</pre>  <p>&nbsp;</p></blockquote><p><strong>Note on Methods:</strong> As you know, methods in classes also are marked public, private, or protected. If we write methods that override other methods, we may not use more restricted access modifiers. In other words, if a method is public, we must override it with a public method. </p><p>&nbsp;</p><p><strong>Question: </strong>What are the data members of the <span class="style7">Triangle</span> class? </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p><hr><h2><span class="style6"><span class="style7"><a name="super"></a>super</span> and Overriding Methods </span></h2><p>The keyword <span class="style7">super</span> allows us to call an analogous method of a superclass . Here are two ways to use it:</p><ul>  <li>In a subclass constructor, simply use a call to <span class="style7">super()</span> to access a constructor of the superclass. As constructors may be overloaded, this call may also take arguments and which constructor gets called depends on the arguments. The first step executed in the implementation of all subclass constructors should be a call to a superclass constructor.</li>  <li>In implementing any other method we're overriding, we can call the superclass version of the method via <span class="style7">super.<em>methodName</em>()</span>. (This is necessary, as we'd otherwise be making a recursive call.) </li></ul><p><strong>Example 1: </strong>The following default constructor in the Triangle class calls the default constructor of the Polygon class:</p><blockquote>  <pre>public Triangle()// POST: A default triangle object is created with all points at (0,0){   <span class="style10">super();</span>     // call superclass constructor      // set other data members new to this class}</pre></blockquote><p>&nbsp;</p><p><strong>Example 2: </strong>Let's suppose the Polygon class has a constructor of the following form:</p><blockquote>  <pre>public Polygon(double x, double y)</pre></blockquote><p>Suppose, further, that the implementation of this constructor includes error checking. (Note that we don't need to <em>see</em> the implementation of a superclass to implement the subclass. We don't even need to have access to the source code to compile the Subclass -- only the <span class="style7">.class</span> file for the superclass.) </p><p>Suppose the NGon subclass wanted to use this constructor. It might do so as follows: </p><blockquote>  <pre>public NGon(double x, double y, int n)// PRE:  n &gt; 2, x &gt;= 0, y &gt;= 0// POST: An NGon object located at (x,y) with n points is created{    <span class="style10">super(x, y); </span>     // call superclass constructor to set location    if(n &gt; 2)         // validate and set number of points       numPts = n;    else       numPts = 3;    // minimum number of points possible}</pre></blockquote><p>&nbsp;</p><p><strong>Example 3:</strong> Suppose we want to write a <span class="style7">toString()</span> function for <span class="style7">NGon</span>. We  override the existing method from <span class="style7">Polygon</span>, but all we need to add is the number of points. So, rather than rewriting existing code, let's reuse via <span class="style7">super</span>: </p><blockquote>  <pre>   public String toString()   // POST: FCTVAL == string representation of the NGon<br>   {<br>       return <span class="style10">super.toString()</span> + &quot; with &quot; + numPts + &quot; points&quot;;<br>   }</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><h3 class="style6">Marking Methods Overridden</h3><p>We should inform the compiler that we are writing a method to override another method via the following line of code: </p><blockquote>  <pre>@Override</pre></blockquote><p>This line is placed on the line above the method, as illustrated in the following improvement of our partial Triangle class: </p><blockquote>  <pre>public class Triangle extends Polygon{   // Intend to use inherited location for first corner   private double xLoc2;        // x coordinate of 2nd point of triangle   private double yLoc2;        // y coordinate of 2nd point of triangle   private double xLoc3;        // x coordinate of 2nd point of triangle   private double yLoc3;        // y coordinate of 2nd point of triangle   //...   <span class="style10">@Override</span>   public String toString()   // POST: FCTVAL == String representation of the Triangle   {      return &quot;Triangle at (&quot; + xLoc + &quot;, &quot; + yLoc + &quot;), (&quot;                             + xLoc2 + &quot;, &quot; + yLoc2 + &quot;), (&quot;                             + xLoc3 + &quot;, &quot; + yLoc3 + &quot;)&quot;;   }}</pre></blockquote><p>The benefit of using this annotation is that is adds extra compiler error checking to make sure that the signature of the method being overridden matches that of the superclass method. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p><hr><h2><span class="style6"><a name="object"></a>Object class and Detecting Types </span></h2><p>Java is well designed for inheritance. Every class you write is implicitly a subclass of a class called <span class="style12">Object</span>. If your class doesn't extend another class, it implicitly directly extends <span class="style7">Object</span>. Otherwise, it indirectly extends <span class="style7">Object</span>. </p><p>This would allow us the ability to make a collection of <span class="style7">Object</span>s. </p><p>The <span class="style7">Object</span> class does contain several methods. Some of these are intended to be overridden.<span class="style7">toString()</span> is one such example, hence our practice of creating a <span class="style7">toString()</span> method for all classes. </p><p>Note that this allows some special behavior such as <em>implicit </em>calls to <span class="style7">toString()</span>. In other words, for <span class="style7">Triangle</span> object <span class="style7">myTriangle</span>, the following are the same:</p><ul>  <li class="style7">System.out.println(myTriangle.toString()); </li>  <li class="style7">System.out.println(myTriangle);</li></ul><p>See Section 9.7 of Deitel for more on the methods of the <span class="style7">Object</span> class. </p><p>&nbsp;</p><h3><span class="style6">Detecting Types</span></h3><p>With every reference type inheriting from the same base class, you may wonder if it's possible to know what type variables <em>really </em>are. Perhaps you have some behavior that is specific to one type and its subclasses, but you don't want to apply to its superclasses. Java provides the keyword <span class="style7">instanceof</span> for this purpose. Here's the general form of a Boolean expression using it: </p><blockquote>  <pre><span class="style7"></span><em>objectName </em><span class="style10">instanceof</span> <em>ClassName</em><span class="style7"></span></pre></blockquote><p>For example, you might write code something like this:</p><blockquote>  <pre>Object[] objects;//...if(objects[index] instanceof Quadrilateral)   //Code for Quadrilaterals only</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p><hr><h2><span class="style6"><a name="next"></a>From here...</span></h2><p>With the remaining time, we'll do a short lab to get practice with these ideas. </p><p>Next time, we'll look at another example and complete a more involved activity. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#idea">The Idea</a> &bull; <a href="#ex">Example Hierarchies</a> &bull; <a href="#extends">Defining Subclasses</a> &bull; <a href="#protected">Access Rights (protected)</a> &bull; <a href="#super">super</a> &bull; <a href="#object">Object class</a> &bull; <a href="#next">Next steps</a> </font></p></body></html>