<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Classes</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><style type="text/css"><!--.style1 {font-family: "Courier New", Courier, mono}.style3 {color: #FF6600}.style4 {	color: #000066;	font-weight: bold;	font-family: "Courier New", Courier, mono;}.style5 {	color: #000066;	font-weight: bold;}--></style></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center"><font color="#FF6600">Classes</font></h1><p align="right"><font size="-1">Last Modified <!-- #BeginDate format:Am2 -->1/23/11<!-- #EndDate --></font></p><p align="center"><font size="1">		<a href="#overview">Overview</a> &bull; 		<a href="#access">Access Rights</a> &bull; 		<a href="#ex">Example Setup</a> &bull; 		<a href="#constructor">Constructors</a> &bull; 		<a href="#modifier">Modifiers</a> &bull;		<a href="#accessor">Accessors</a> &bull;		<a href="#this">this</a> &bull;		<a href="#client">Client Code</a>  &bull;		<a href="#gc">Garbage Collection</a> </font></font></p><hr><h2><font color="#990033"><a name="overview"></a><font color="#FF6600">Getting Started</font></font></h2>In this lecture, we'll begin our study of object-oriented programming. Let's start with the basics. <h3 class="style3"> The Ideas of Classes and Objects</h3><p>The basic ideas of object-oriented programming you learned in 122 apply in Java:</p><ul>  <li>The <strong>class</strong> is the template for a data type.</li>  <li>An <strong>object</strong> is a single instance of a class, and there are generally many objects of one class.</li>  <li>Objects have a name, state, and set of operations. Related, classes have names and consist of <strong>member </strong>data (or <strong>instance variables</strong>) and methods. </li>  <li>We generally call methods on objects of the class and we call this <strong>sending a message</strong> to the object. </li>  <li>Class members have access rights, i.e. public and private. Typically, data members are private and methods are public, but this is certainly not always the case. </li>  <li>We use the <strong>dot operator</strong> between the object name and the member name in accessing members of objects (generally sending messages). </li>  <li>Member methods are of three types:      <ul>        <li><strong>Constructors</strong>, which set up objects of the class. </li>        <li><strong>Modifiers</strong>, which allow changes to the state of objects. </li>        <li><strong>Accessors</strong>, which allow clients to use information about the state of objects outside of the class. </li>      </ul>  </li></ul><p>We declare each class in its own file. In Java, there is no separation between the class interface and the implementation. (That means no .h and .cpp files -- it's all in one.) Nevertheless, the extremely important ideas of abstraction and information hiding apply and we need good pre- and postconditions to facilitate these ideas. </p><p>&nbsp;</p><h3 class="style3">An Example </h3><p>Let's begin with an example of a class in a Java. </p><p>In the class definition, we should list all data members first, then the constructors, modifiers, and accessors in order. </p><p>Here's an example of a simple class for a course, which would be defined in <span class="style1">Course.java</span>:</p><blockquote>  <pre>public class Course{    private String name;            // official title of the course    private String dept;            // abbreviation of department offering course    private int number;             // course number        public Course()                // POST: A default Course object is created with name set to blank,    //       dept set to blank, and number set to 0    {        name = new String(&quot;&quot;);        dept = new String("");        number = 0;    }    public Course(String initName, String initDept, int initNumber)    // PRE:  initName and initDept are initialized and initNumber > 0    // POST: A Course object is created with name == initName, dept == initDept,    //         and number == initNumber    {        name = initName;        dept = initDept;        number = initNumber;    }    public void ResetName(String newName)    // PRE:  newName is initialized    // POST: name has been reset to newName    {        name = newName;    }    public String GetName()    // POST: FCTVAL == private data member name    {        return name;    }    public String toString()    // POST: FCTVAL == String containing dept, a space, number, a colon, and    //                 name    {        return dept + " " + number + ": " + name;    }}</pre></blockquote><p>Here's an example of code from a main program to use the <span class="style1">Course</span> class (Notice that calling the constructor is done when we use the <span class="style1">new</span> keyword. ): </p><blockquote>  <pre> Course first = new Course();<br> Course second = new Course(&quot;OOP WITH WEB&quot;, &quot;CMPSC&quot;, 221);</pre>  <pre> first.ResetName(&quot;INTERMED PROGRAMMING&quot;);</pre>  <pre> System.out.println(&quot;First course name: &quot; + first.GetName()); System.out.println(&quot;Second course info: &quot; + second.toString());</pre></blockquote><p>We'll discuss all of the details of how to define classes in later sections of this lesson. </p><p>&nbsp;</p><h3 class="style3">Why OOP?</h3><p>There are many benefits to using classes:</p><ul>  <li>Encapsulation<br>    <br>  </li>  <li>Abstraction<br>    <br>  </li>  <li>Protecting data members via access rights <br>    <br>  </li>  <li>Inheritance<br>    <br>  </li>  <li>Polymorphism</li></ul><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font> </p><hr><h2 class="style3"><a name="access"></a>Access Rights </h2><p>We've seen the <span class="style1">public</span> and <span class="style1">private</span> access modifiers. We can use these before defining any variables/objects and methods. Anything not marked with an access modifier is inherently public, but it's proper form to be explicit. Formally,</p><ul>  <li>Any data or method marked <span class="style1">public</span> may be used in any class.</li>  <li>Any data or method marked <span class="style1">private</span> may be used only in the class where it is defined. </li></ul><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font>  </p><hr><h2><font color="#990033"><font color="#FF6600"><a name="ex"></a>Running Example </font></font></h2><p>In these notes, we'll work with a running example of a class for keeping track of bank accounts. We'll keep it simple and model an account with two data members, the name of account holder and the balance of the account. </p><p>We typically treat data members as private and declare them at the top of the class, so we'll start with the following: </p><blockquote>  <pre>public class BankAccount{   private String name;      // name of account holder   private double balance;   // how much money is in account, $   // Methods will go here}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font>  </p><hr><h2><font color="#990033"><font color="#FF6600"><a name="constructor"></a>Constructors</font></font></h2><p><strong>Constructors </strong>are member methods that set up objects of the class. They allocate memory for objects and ensure that objects have a reasonable initial state, and all other methods can depend on any of the constructors having done this job properly. Thus, in almost all cases, constructors should initialize all instance data members of the object. </p><p>Remember the following properties of constructors:</p><ol>  <li>Constructors MUST have the same name as the class itself. That's how you'll make instances of the class (called objects).</li>  <li>They don't have a return type. It's simply omitted.</li>  <li>They can be <strong>overloaded</strong>, i.e. you can have several constructors with the same name, but different lists of parameters. This ability allows you to create a <strong>default constructor</strong> (the one with no parameters) and <strong>initializer constructors</strong> with different kinds of parameters.</li>  <li>They aren't called directly (i.e. the dot notation is NOT used for constructors).</li></ol><p>In client code, calling the constructor is done when we use the <span class="style1">new</span> keyword. </p><p>Here is an example of code for a default constructor:</p><blockquote>  <pre><font color="#000066">public BankAccount()// POST: A default BankAccount object is created with the name set to a blank and//       and the balance set to $0.00{   name = &quot; &quot;;   balance = 0.0;}</font></pre></blockquote><p>&nbsp;</p><h3 class="style3">More on Overloading </h3><p>We can overload constructors to allow us to create objects given different starting information. For example, if we know the starting balance of an account, we could use the following initializer constructor:</p><blockquote>  <pre><font color="#000066">public BankAccount(double initBalance)<br>// PRE:  initBalance &gt;= 0.00 and is in dollars// POST: A bankAccount object is created with the name set to a blank//       and the balance set to initBalance{   name = &quot; &quot;;     if(initBalance &gt;= 0)              // validate proposed initial balance      balance = initBalance;    else      balance = 0; }</font></pre></blockquote><p>&nbsp;</p><p><strong>Problem: </strong>Propose another overloaded constructor for the BankAccount class.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp; </p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font>  </p><hr><h2><font color="#990033"><font color="#FF6600"><a name="modifier"></a>Modifiers</font></font></h2><p><strong>Modifiers </strong> define the set of operations. They allow the client to make changes to the private variables. Therefore, they will generally contain assignment statements to change one or more private variables.</p><p>Their declarations look like the ones for free functions. Often, but not always, they have a void return type. </p><p> These functions are generally the most complex group of member functions, since they may involve some complicated calculations. The simplest kinds of modifiers are &quot;set functions&quot; that set the values of the private data to values passed in as parameters. </p><p>Some error checking may be necessary. Indeed, this is one of the benefits of object-oriented programming: we can program objects to protect themselves against taking on invalid values. </p><p>Here's an example of a simple set modifier (without any error checking):</p><blockquote>  <pre><font color="#000066">public void ResetAccount(String newName, double newBalance)// PRE:  newName has been assigned a value//       &amp;&amp; newBalance &gt;= 0.00 and is in dollars// POST: The account object is reset with the name set to newName//       and the balance set to newBalance{    name = newName;            // Match up private variables with parameters    balance = newBalance;      // Could do error checking here with an if(balance &gt;= 0)}</font></pre></blockquote><p>Notice that this modifier is similar to a constructor. Here's an example of a more plausible modifier:</p><blockquote>  <pre><font color="#000066">public void Withdraw(double amount)// PRE:  amount &gt;= 0.00 and is in dollars// POST: amount is deducted from the balance stored for the account{    balance = balance - amount;     // Could do error checking here }</font></pre></blockquote>
<p>Note that some authors use the term "mutators" to refer to modifiers. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font>  </p><hr><h2><font color="#990033"><font color="#FF6600"><a name="accessor"></a>Accessors</font></font></h2><p><strong>Accessors </strong> allow the client to see what values the private variables have. They don't allow the client to make changes. The return type is that of the variable being &quot;accessed.&quot;</p><p>Analogous to the &quot;set&quot; functions are the &quot;get&quot; functions that just retrieve the values of private variables. </p><p>Here's a simple &quot;get&quot; function that returns the balance of an account:</p><blockquote>  <pre><font color="#000066">public double GetBalance() // POST: Return the current balance of the account{    return balance;}</font></pre></blockquote><p>Note that this accessor <i>returns</i> a value. Accessors can also just <i>display</i> information to the screen, without returning anything. Such accessors have void return types. Consider this example: </p><blockquote>  <pre><font color="#000066">public void DisplayBalance() // POST: Display the current balance of the account to the screen{    System.out.printf(&quot;Your balance is currently $%.2f\n&quot;, balance); }</font></pre></blockquote><p>Note that accessors without parameters rarely require preconditions. Accessors could not have been called had the objects not been initialized and we should write constructors that properly initialize objects. </p><p>&nbsp;</p><h3 class="style3">toString()</h3><p>Common practice in Java is to provide an accessor called <span class="style1">toString()</span>, which simply returns a string representation of the current object. </p><p><strong>Problem: </strong>Propose a <span class="style1">toString()</span> function for the <span class="style1">BankAccount</span> class. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>We'll discuss this method further when we discuss inheritance. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font>  </p><hr><h2><font color="#990033"><font color="#FF6600"><a name="this"></a>this</font></font></h2><p>The keyword <span class="style4">this</span> can used in two ways in programming classes in Java: </p><ul>  <li>To refer to the current instance of the class within member functions. </li>  <li>To call a constructor within another constructor. </li></ul><p>To understand why the former is so useful, consider the issue of scope. Recall that in our <span class="style1">BankAccount</span> class, we had a private variable called <span class="style1">balance</span>. Suppose we also used the name <span class="style1">balance</span> for a parameter or local variable within a method. Since local scope beats class wide scope, referring to <span class="style1">balance</span> would bring up the local variable. Attempting to write the following would be nonsense, even though we have two distinct variables called <span class="style1">balance</span>: </p><blockquote>  <p><span class="style1">balance = balance; </span></p></blockquote><p>However, we refer to the current object using <span class="style1">this</span> and dot notation to specify that we want the class data member balance, producing the following valid code: </p><blockquote>  <p><span class="style1"><span class="style5">this.</span>balance = balance; </span></p></blockquote><p>Here's how this all might fit into a constructor: </p><blockquote>  <pre>public BankAccount(double balance)<br>// PRE:  balance &gt;= 0.00 and is in dollars// POST: A BankAccount object is created with the name set to a blank//       and the class member balance set to balance{   name = &quot; &quot;;     if(balance &gt;= 0)              // validate proposed initial balance      <span class="style5">this.balance</span> = balance;    else      <span class="style5">this.balance</span> = 0; }</pre></blockquote><p>&nbsp;</p><p>As for the latter case of using <span class="style4">this</span>, we simply use it as the name of a constructor in a call. Consider the following alternate implementation of the default constructor, which calls the initializer constructor above:</p><blockquote>  <pre>public BankAccount()// POST: A default BankAccount object is created with the name set to a blank and//       and the balance set to $0.00{   <span class="style5">this(0.0);</span> }</pre></blockquote><p>Note that using this technique would allow us to create several initializer constructors quickly without rewriting error-checking code multiple times. (The best-designed code never repeats anything.) </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a></font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="client" id="client"></a>Client Code </font></font></h2><p><strong>Problem:</strong> Create a <span class="style1">BankAccount</span> object with you as the account holder and an initial balance of $100. Then withdraw $20 and print out your account balance. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center">&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a> </font> </p><hr><h2><font color="#990033"><font color="#FF6600"><a name="gc"></a>A Word on Garbage Collection </font></font></h2><p>Garbage collection, i.e. when the system rids memory of variables and objects that are no longer being used, is done automatically in Java. This is both good and bad:</p><ul>  <li>We don't need to write code to delete objects from memory</li>  <li>We have no control over when objects are deleted from memory</li></ul><p>It is possible to write explicit destructors, but not necessary or even recommended. See Section 8.10 of Deitel for more information. </p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"><font size="1"><a href="#overview">Overview</a> &bull; <a href="#access">Access Rights</a> &bull; <a href="#ex">Example Setup</a> &bull; <a href="#constructor">Constructors</a> &bull; <a href="#modifier">Modifiers</a> &bull; <a href="#accessor">Accessors</a> &bull; <a href="#this">this</a> &bull; <a href="#client">Client Code</a> &bull; <a href="#gc">Garbage Collection</a></font></p></body></html>