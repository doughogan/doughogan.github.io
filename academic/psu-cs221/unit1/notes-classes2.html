<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Classes, Part 2</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><style type="text/css"><!--.style1 {font-family: "Courier New", Courier, mono}.style3 {color: #FF6600}.style5 {	color: #000066;	font-weight: bold;}--></style></head><body><? // grab the headerinclude 'notes-header.php' ; ?><h1 align="center"><font color="#FF6600">Classes, Part II </font></h1><p align="right"><font size="-1">Last Modified <!-- #BeginDate format:Am2 -->9/4/11<!-- #EndDate --></font></p><p align="center">This lecture is a continuation of <a href="notes-classes.php">Classes, Part I</a>.</p><p align="center"><font size="1">   <a href="#static">Static members</a> &bull;   <a href="#final">Final variables</a> &bull;    <a href="#init">Initializing Members</a> &bull;   <a href="#comparison">Relating Objects</a> &bull;   <a href="#doc1">External Documentation</a> &bull;   <a href="#prepost">PRE/POST</a> &bull;<a href="#composition">Composition</a>  </font></p><hr><h2><font color="#FF6600"><span class="style1"><a name="static"></a>static</span> Class Members</font></h2><h3 class="style3">Data</h3><p>We can declare <strong>static</strong> class member variables, i.e. data members that are the same for all instances of a class. They represent information that is <em>not</em> different from object to object, but rather common to all objects. </p><p>One common use of a static member is to keep track of the number of objects of a class that have been instantiated. </p><p>We declare objects static simply by adding keyword <span class="style1">static</span> in the declaration. We  also need to initialize static members in the declaration. (Why?) Consider the following example: </p><blockquote>  <pre>private <span class="style5">static</span> int numAccounts <span class="style5">= 0</span>; </pre></blockquote><p>Then we would add the following line of code to constructor implementations: </p><blockquote>  <pre>numAccounts++; </pre></blockquote><p><strong>Another example: </strong>Suppose all bank accounts share a common interest rate. Then this could be a static data member. Write a line of code to define it. </p><p>&nbsp;</p><p>&nbsp;</p><h3 class="style3">Methods</h3><p>We can also have static methods within classes too. These are typically used for modifying and accessing static class members. For example, we might have the following static members in the <span class="style1">BankAccount</span> class: </p><ul>  <li>An accessor to print out how many accounts exist.</li>  <li>A modifier to change the interest rate.</li>  <li>An accessor to get the current interest rate. </li></ul><p>Here's an example of the code for the first accessor:</p><blockquote>  <pre>public static int GetNumberOfAccounts()// POST: FCTVAL == how many accounts have been instantiated{   return numAccounts;}</pre></blockquote><p>When calling static member functions in client code, we call them on the class, not on individual objects, as static means to be independent of objects. Here's how we might call the above method in another class:</p><blockquote>  <pre>System.out.printf(&quot;%d accounts are active&quot;, BankAccount.GetNumberOfAccounts()); </pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center">&nbsp; </p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a> </font></p><hr><h2><a name="final"></a><font color="#990033"><font color="#FF6600"><span class="style1">final</span> Data Members</font></font></h2><p>The notion of constants we learned about in C++ has a cousin in Java: <span class="style1">final</span> variables. They have the following properties:</p><ul>  <li>They can only be assigned a value once, like C++ constants.</li>  <li>They do not need to be assigned a value when they're declared, but can be assigned a value later, unlike C++ constants.</li></ul><p>Data members that are both static and final are constants in the same sense you know from C++. In such cases, they should be written with names in ALL CAPS to distinguish them from variables.</p><p>Let's re-examine the idea of interest rate for a bank account in different lights:</p><ul>  <li>Suppose all bank accounts share the same interest rate and we know it in advance. Then we could declare it as a final data member:      <blockquote>      <pre>private <span class="style5">final</span> double interest = 0.025;          // Interest rate is 2.5% per year</pre>    </blockquote>  </li>  <li>More properly, though, in the above example, as the interest rate is the same for all objects, it is also static, so, let's update the declaration:  </li>  <blockquote>    <pre>private <span class="style5">static</span> final double INTEREST = 0.025;   // Interest rate is 2.5% per year</pre>  </blockquote>  <li>Suppose different bank accounts could have different interest rates, but those interest rates do not change. Then we could use a final variable for the interest rate, but set its value in the constructor.     <ul>      <li>We would write the declaration as follows:      </li>      <blockquote>        <pre>private <span class="style5">final</span> double interest;             // Interest rate per year as a fraction</pre>      </blockquote>      <li>We would then have the following (partial) constructor:         <blockquote>          <pre>public BankAccount(double intRate)<br>{   this();   interest = intRate; }</pre>        </blockquote>      </li>    </ul>  </li></ul><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center">&nbsp;</p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="init" id="init"></a>On Initializing Class Members </font></font></h2><p>Now that we know all of the kinds of class data members, let's discuss the issue of where to initialize and allocate memory for them. In short, here are the rules:</p><ul>  <li><em><strong>Declare</strong></em> instance variables at the top of the class. <em><strong>Initialize</strong></em> them in the constructor, as the job of a constructor is to initialize instances of the class. Allocate memory for arrays in the constructor. Call other constructors with <span class="style1">new</span> in the constructor. Unless your variable falls into the cases below, you should never write code with <span class="style1">new</span> in the variable declarations and there shouldn't be assignment statements. </li>  <li>Exception: If your variable is static (i.e. it is <em>not</em> an instance variable -- it doesn't depend on instances of the class but is the same for all), then it must be initialized upon declaration. </li>  <li>Exception: If you have a constant, which would be both static and final, it too must be initialized upon declaration. See the last bullet.</li></ul><p>Consider the following example, with notes on syntax, not semantics (your comments should be about semantics, of course): </p><blockquote>  <pre>public class MyClass{   private static final int CONSTANT = 10;   // Constant, also static: initialize here      private static int counter = 0;           // Static member, not instance variable: initialize here      private final int var0;                   // Instance primitive type variable that happens to be final                                             //   initialize in constructor, never here, like non-final instance variable      private OtherClass var1;                  // Instance Reference variable:                                              //   initialize in constructor, never here   private int var2;                         // Instance primitive type variable:                                              //   initialize in constructor, never here   private int[] var3;                       // Instance array:                                              //   allocate memory for it in constructor   public MyClass()   {      var0 = 0;                          // Initialize a primitive type var.       var1 = new OtherClass();           // Initialize a reference var. by calling a constructor      var2 = 0;                          // Initialize a primitive type var.       var3 = new int[CONSTANT];          // Allocate memory for an array: constructor must do this!           }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center">&nbsp;</p><p>&nbsp;</p><p align="center">&nbsp;</p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="comparison" id="comparison"></a>Relating Objects of a Class </font></font></h2><p>Sometimes we will want to work with two instances of a class simultaneously, say to compare them or implement the equivalent of operations like addition or subtraction. This bears some attention of its own. </p><p>We can pass other instances of a class to member methods of that class. When we do so, since we're still in the same class, we can access private members directly. </p><p><strong>Example 1: </strong>Consider this example of an accessor:</p><blockquote>  <pre>public boolean hasSameOwnerAs(BankAccount second)// PRE:  second is initialized// POST: FCTVAL == true when name of this BankAccount matches that of second; //       FCTVAL == false otherwise{   return name.equals(second.name);}</pre></blockquote><p>Notice how we compare <span class="style1">String</span>s in the above example. </p><p><strong>Example 2: </strong>Consider this example of a modifier:</p><blockquote>  <pre>public boolean transferAllFundsFrom(BankAccount second)// PRE:  second is initialized// POST: balance of this BankAccount is increased by balance of second, provided//         second's balance is positive, and FCTVAL == true; otherwise,//         FCTVAL == false{   if(second.balance &gt; 0)                // there is $$ to transfer   {      this.balance += second.balance;    // make the transfer      second.balance = 0;      return true;                       // indicate success   }   else                                  // no $$ to transfer   {      return false;                      // indicate failure   }}</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center"></p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a> </font></p><hr><h2 class="style3"><a name="doc1"></a>Documenting Classes: The Big Picture </h2><p>In this document, I'll focus on what I'll call the <strong>external documentation</strong> of a class: the comments someone who wanted to write client code would read in order to be able to use your class. This is in contrast to what I'll call the <strong>internal documentation</strong>, i.e. the comments inside individual methods. While the internal documentation is important, the external documentation is of greater importance, as it is what fosters the use of classes in other classes and programs. </p><p>The external documentation of a class has three important parts:</p><ul>  <li><em>The description of the class in the header comments. </em>This is the shortest part, but it's important to give a sentence or a few sentences explaining what it is the class models.</li>  <li><em>The data dictionary of the class.</em> All class-wide variables should be clearly documented as you would any other variable - with their intent, units, etc. Organize this information carefully so that a reader of any of your methods can quickly reference the data dictionary upon encountering the name of a data member.</li>  <li><em>The external documentation of the individual methods</em><em>. </em>Give each method clear pre- and postconditions. See below. </li></ul><p>&nbsp;</p><p>&nbsp;</p><p align="center"></p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a> </font></p><hr><h2 class="style3"><a name="prepost"></a>Documenting Methods </h2><p>Remember that the goal of documenting methods is so that someone else can read your method's header and its PRE and POST and be able to use your method without any confusion.<strong> </strong>The PRE and POST should establish a contract: &quot;If I meet the stated preconditions in calling this method, it will produce exactly what the postconditions say.&quot; </p><h3 class="style3">When are they required?</h3><p>Here are guidelines for including PRE and POST: </p><ol>  <li>Every method (except <span class="style1">main</span>) needs a POST because every method does something. Here are some common questions to consider:      <ol type="a">        <li>Does the method change the state of any variables? (In OOP, we rarely use output parameters, but we often do change data members.)</li>        <li>Does the method return anything? </li>        <li>Does the method produce any output? (Consider the screen, files, and databases.) </li>      </ol>  </li>  <li>A method needs a PRE if its behavior depends on something external to work correctly. Here are some common external factors to consider:      <ol type="a">        <li>Are there any input parameters? Address each one.</li>        <li>Does the method depend on a file? (Consider the path and format.)</li>        <li>Does the method depend on a connection to an external resource, like a database, being open?</li>      </ol>  </li></ol><p>&nbsp;</p><h3 class="style3">Guidelines for Clarity </h3><p>Some important guidelines for clear PRE/POST (and to save you time too):</p><ol>  <li><strong>Use complete sentences.</strong> (Mathematical operators like &quot;==&quot; count as verbs, though.) </li>  <li> <strong>Use variable names explicitly:</strong> </li>  <ul>    <li>All parameters must be referenced by name.</li>    <li>Remember this is external documentation: Reference only the names of parameters (from this function's header) or class data members. Never reference local variables.</li>  </ul>  <li><strong>Write abstractly: </strong>The &quot;someone else&quot; using your method doesn't care about what's going on inside the braces, doesn't want to read any of that code, doesn't really care about your algorithms within. He or she only cares about the end result. So, PRE/POST should only focus on things in the parameters and factors external to the method (like class state or the system itself).</li>  <li><strong>Write specifically: </strong>Address details such as format (e.g. &quot;one value per line&quot; or &quot;comma-separated&quot;), units, and valid ranges. </li>  <li><strong>Write concisely: </strong>Write the strongest condition possible and don't state the obvious. </li></ol><p>&nbsp;</p><h3 class="style3">Discussion Question </h3><p>Consider a function that has this heading:</p><blockquote>  <pre>public double foo(double radius)</pre></blockquote><p>The method will do some calculation where we divide by the radius. Which of the following statements should be part of the precondition? </p><ul>  <li>The first parameter is declared</li>  <li>radius is declared</li>  <li>initializes radius</li>  <li>radius is initialized</li>  <li>not zero </li>  <li>radius is in meters</li>  <li>radius is nonzero</li>  <li>radius != 0 </li>  <li>radius &gt; 0</li></ul><p>How about the postcondition? What do you want to know? </p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="left">&nbsp;</p><p align="center"></p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a> </font></p><hr><h2><font color="#990033"><font color="#FF6600"><a name="composition"></a>Composition</font></font></h2><p>Note that we should aim to keep classes small. We can use instances of classes in other classes, supporting the idea of encapsulation. This practice is called <strong>composition</strong> and it creates what we call a <em><strong>has-a</strong> </em>relationship between one class and another. </p><p> For example, suppose we're trying to represent  class schedules. This is best done with multiple classes: </p><ul>  <li>A time class, which might hold the hour and minute component of times and whether they are a.m. or p.m.</li>  <li>A course class, which might contain the name, number,  instructor, and number of credits for  a course, as well as when it starts and stops (using instances of the time class). [Note that this is an improvement over the initial example given during the previous lecture.] </li>  <li>A class schedule class, which might contain an array  of instances of the course class, your student ID, a count of how many classes and credits you have, and whether or not you are considered a full time student </li></ul><p>Notice how behavior and information is broken into small chunks. </p><p><strong>Problem: </strong>Suppose the time class is called <span class="style1">Time</span> and has data members <span class="style1">hour</span>, <span class="style1">minute</span>, and <span class="style1">isPM</span>. Complete the data dictionary of the course class as described. It's begun here:</p><blockquote>  <pre>private String name;        // official title of the courseprivate String dept;        // abbreviation of department offering courseprivate int number;         // number of course in deptprivate String instructor;  // name of person teaching the course in                             //   &quot;Last, First&quot; orderprivate int numCredits;     // number of credits course is worth</pre></blockquote><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p align="center">&nbsp;</p><p align="center">&nbsp;</p><p align="center">&nbsp;</p><p align="center">&nbsp;</p><p align="center">&nbsp;</p><p align="center"></p><p align="center"> <font size="1"> <a href="#static">Static members</a> &bull; <a href="#final">Final variables</a> &bull; <a href="#init">Initializing Members</a> &bull; <a href="#comparison">Relating Objects</a> &bull; <a href="#doc1">External Documentation</a> &bull; <a href="#prepost">PRE/POST</a> &bull; <a href="#composition">Composition</a></font></p></body></html>